<!DOCTYPE html> 
<html> 
  
<body> 
  <h1 id="Geeks" style="color: green;">GeeksforGeeks</h1>
  <button id="mod">Modify History</button>
  <script type="text/javascript">
    // Monkey patching window.history
 
    // 1. override window.pushState
    (function(history) {
      // 1.1. 원본 pushState 유지
      const { pushState } = history;

      // 1.2. pushState 기능 추가 (override)
      // 4. execute pushState function
      history.pushState = function(state) {
        console.log('History has been modified!');
        console.log(state);
        
        return pushState.apply(history, arguments);
      };
    })(window.history);

    // history.onpushstate = function (state) {
    //   console.log('History has been modified!');
    //   console.log(state);
    // };

    // 2. add event handler onpopstate
    window.onpopstate = history.pushState;

    // 3. firing popstate event
    window.history.pushState({ gfg: 'Geeks' }, 'page 2', 'test.html'); // 1
  </script> 
</body> 
</html> 